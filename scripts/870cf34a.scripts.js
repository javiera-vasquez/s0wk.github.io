"use strict";angular.module("tucargaApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html"}).when("/como_funciona",{templateUrl:"views/como.html"}).when("/ayuda",{templateUrl:"views/ayuda.html"}).when("/contacto",{templateUrl:"views/contacto.html"}).when("/directorio",{templateUrl:"views/directorio.html",controller:"DirectorioController"}).when("/registro",{templateUrl:"views/registro.html",controller:"RegistroController"}).when("/exito",{templateUrl:"views/exito.html"}).when("/cotizar/usuario",{templateUrl:"views/cotizar/usuario.html",controller:"UsuarioController"}).when("/cotizar/exito",{templateUrl:"views/exito.html"}).when("/cotizar",{templateUrl:"views/cotizar.html"}).when("/cotizar/importacion",{templateUrl:"views/cotizar/importacion.html",controller:"FreightController"}).when("/cotizar/exportacion",{templateUrl:"views/cotizar/exportacion.html",controller:"ExpoController"}).when("/cotizar/domestica",{templateUrl:"views/cotizar/domestica.html",controller:"DomesticaController"}).when("/cotizar/contenedor",{templateUrl:"views/cotizar/contenedor.html",controller:"ContenedorController"}).when("/polls",{templateUrl:"views/polls.html",controller:"PollsController"}).when("/choices",{templateUrl:"views/choices.html",controller:"ChoicesController"}).otherwise({redirectTo:"/"})}]),angular.module("tucargaApp").controller("MainController",["$scope",function(a){a.awesomeThings=[{question:"asdf",pubDate:"12-2"},{question:"asdrytu",pubDate:"12-2"},{question:"qwer",pubDate:"12-2"},{question:"l√±ki",pubDate:"12-2"}]}]),angular.module("tucargaApp").controller("PollsController",["$scope","$http",function(a,b){a.formData={},a.processForm=function(){b({method:"POST",url:"http://127.0.0.1:8000/directory/freightfirststep/",data:a.formData,headers:{"Content-Type":"application/json"}}).success(function(a){console.log(a)}).error(function(a){console.log(a)})}}]),angular.module("tucargaApp").controller("DirectorioController",["$scope","$http",function(a,b){b({method:"GET",url:"http://127.0.0.1:8000/directory/transportcompany/",headers:{"Content-Type":"application/json"}}).success(function(b){console.log("nice"),a.directory=b}).error(function(a){console.log(a)})}]),angular.module("tucargaApp").controller("FreightController",["$scope","$http",function(a,b){b({method:"GET",url:"http://127.0.0.1:8000/directory/region/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnRegion=b}).error(function(a){console.log(a+"fail")}),a.destinationCommune=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.destinationCommuneRegion+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.destinationSelectCommune=b}).error(function(a){console.log(a+"fail")})},a.returnCommune=function(){b({method:"GET",url:"http://127.0.0.1:8000/directory/commune/"+a.returnCommuneRegion+"/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnSelectCommune=b}).error(function(a){console.log(a+"fail")})},b({method:"GET",url:"http://127.0.0.1:8000/directory/freighttype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnFreightType=b}).error(function(a){console.log(a+"fail")}),b({method:"GET",url:"http://127.0.0.1:8000/directory/containertype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returncContainerType=b}).error(function(a){console.log(a+"fail")}),b({method:"GET",url:"http://127.0.0.1:8000/directory/trucktype/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnTruckType=b}).error(function(a){console.log(a+"fail")}),b({method:"GET",url:"http://127.0.0.1:8000/directory/equipment/",headers:{"Content-Type":"application/json"}}).success(function(b){a.returnEquipment=b}).error(function(a){console.log(a+"fail")}),a.originHour="T00:00",a.originDate="",a.originTotalDate=function(){return a.originDate+a.originHour},a.destinationTotalDate=function(){return a.destinationDate+"T"+a.destinationHour},a.otherInfo=function(){return a.otherOne+","+a.otherTwo+","+a.otherThree},a.formData={},a.freightPost=function(){a.formData.obj_type="impo",a.formData.freightwaypoint_origin_from_date=a.originTotalDate(),a.formData.freightwaypoint_destination_from_date=a.destinationTotalDate(),a.formData.other=a.otherInfo(),b({method:"POST",url:"http://127.0.0.1:8000/directory/freightfirststep/",data:a.formData,headers:{"Content-Type":"application/json"}}).success(function(a){console.log("win"+a),$location.url("/cotizar/exito")}).error(function(a){console.log("fail"+a)})}}]),angular.module("tucargaApp").directive("emailAvailable",["$http","$timeout",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$parsers.push(function(b){return e.$setValidity("emailAvailable",!0),e.$valid&&(e.$setValidity("checkingEmail",!1),""!==b&&"undefined"!=typeof b?a.get("http://127.0.0.1:8000/directory/user/"+b).success(function(){console.log("win"),$("#add-person").addClass("none"),e.$setValidity("emailAvailable",!0),e.$setValidity("checkingEmail",!0)}).error(function(){console.log("fail"),$("#add-person").removeClass("none"),e.$setValidity("emailAvailable",!1),e.$setValidity("checkingEmail",!0)}):(e.$setValidity("emailAvailable",!1),e.$setValidity("checkingEmail",!0))),b})}}}]);