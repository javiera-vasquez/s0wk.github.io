/******/!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var a=n(1),i=n(2),r=n(3),l=n(4),o=n(5),s=n(6),c=n(7);angular.module("tour",["ngAnimate","ngSanitize","ui.router","toastr"]).config(a.config).config(i.routerConfig).run(r.runBlock).factory("tourService",c.tourService).factory("scrapperService",s.scrapperService).factory("procyclingService",o.procyclingService).controller("MainController",l.MainController)},function(e,t){"use strict";function n(e,t){"ngInject";e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0}n.$inject=["$logProvider","toastrConfig"],Object.defineProperty(t,"__esModule",{value:!0}),t.config=n},function(e,t){"use strict";function n(e,t){"ngInject";e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}),t.otherwise("/")}n.$inject=["$stateProvider","$urlRouterProvider"],Object.defineProperty(t,"__esModule",{value:!0}),t.routerConfig=n},function(e,t){"use strict";function n(e){"ngInject";e.debug("runBlock end")}n.$inject=["$log"],Object.defineProperty(t,"__esModule",{value:!0}),t.runBlock=n},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.MainController=["$log","scrapperService","tourService","procyclingService",function a(e,t,i,r){"ngInject";function l(){return o()}function o(){return i.getStages().then(function(t){e.debug("map of stages",t),d.tours=t})}function s(n){return r.getStage(n).then(function(e){return t.setResults(e)},function(t){e.debug(t)})}function c(e){d.actualRace=e.name,d.race=e.stages,d.actualStage="Seleccionar Etapa"}function u(t,n){e.debug(t),d.actualStage=n,d.spinner=!d.spinner,s(t).then(function(t){d.ranking=t,e.debug(d.ranking)})["finally"](function(){d.spinner=!d.spinner,d.resolveStage=!d.resolveStage})}n(this,a);var d=this;d.tours={},d.race={},d.ranking={},d.setRace=c,d.setStage=u,d.actualRace="Seleccionar Carrera",d.actualStage="Seleccionar Etapa",d.closeTips=!1,d.resolveStage=!1,d.spinner=!1,l()}]},function(e,t){"use strict";function n(e,t,n){"ngInject";function a(e){return"http://www.procyclingstats.com/mob/race.php?id="+e}function i(t){var i=a(t),r=e.defer();return n.get(i).then(function(e){r.resolve(e.data)},function(e){r.resolve(e)}),r.promise}var r={makeUrl:a,getStage:i};return r}n.$inject=["$q","$log","$http"],Object.defineProperty(t,"__esModule",{value:!0}),t.procyclingService=n},function(e,t){"use strict";function n(e){"ngInject";function t(e,t){var n={},a=$(e.body.children).find(t);return a.each(function(e,t){n[$(t).text()]=$(t).attr("href").split("id=")[1]}),this.sections=n}function n(e,t,n,a){var i=[],r=".res"+t+" li",l=$(e.body.children).find(r);return l.each(function(e,t){var r=$(t).children("span"),l={position:r[0].outerText,name:n!==a?r.children()[0].outerText:"",team:n!==a?r.children()[2].outerText:r[1].outerText,time:r[2].outerText};i.push(l)}),i}function a(e){var t=this,n={},a=document.implementation.createHTMLDocument();return a.body.innerHTML=e,this.parseNames(a,this.params.selector_names),angular.forEach(this.sections,function(e,i){n[i]=t.parseTimes(a,e,i,t.params.filter)}),this.stageResults=n}function i(){return this.stageResults}var r={selector_names:".ResultQuickNav",filter:"Teams"},l={params:r,parseNames:t,parseTimes:n,setResults:a,getResult:i};return l}n.$inject=["$log"],Object.defineProperty(t,"__esModule",{value:!0}),t.scrapperService=n},function(e,t){"use strict";function n(e,t,n){"ngInject";function a(){var n="./assets/stages.json",a=t.defer();return e.get(n).then(function(e){a.resolve(e.data)},function(e){a.resolve(e)}),a.promise}var i={getStages:a};return i}n.$inject=["$http","$q","$log"],Object.defineProperty(t,"__esModule",{value:!0}),t.tourService=n}]),angular.module("tour").run(["$templateCache",function(e){e.put("app/main/main.html",'<main class=mdl-layout__content><div class="mdl-layout__tab-panel is-active" id=overview><section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp" ng-hide=main.closeTips><div class="mdl-card mdl-cell mdl-cell--12-col"><div class=mdl-card__supporting-text><h5 class=who>Como funciona</h5>1.- Instalar esta extención de chrome <a href="https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi?hl=en">Chrome CORS.</a><br>2.- Reiniciar Chrome, hacer click en el icono de CORS y seleccionar "Enable cross origin". EL icono se deberia poner verde<br>3.- Seleccionar la carrera y la etapa. (Si la etapa todavia no se corre el sitio no va a desplegar la tabla de resultados)<br>4.- Al hacer click en los "3 puntos" se puede seleccionar bajar el archivo CSV.<br></div></div><button class="mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab" ng-click="main.closeTips = true"><i class=material-icons>close</i></button></section><section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp button-selector"><div class="selector tour"><!-- Left aligned menu below button --> <button id=setRace class="mdl-button mdl-js-button mdl-button--primary">{{ main.actualRace }} <i class=material-icons>arrow_drop_down</i></button><ul class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for=setRace><li class=mdl-menu__item ng-repeat="race in main.tours" ng-click=main.setRace(race)><a>{{ race.name }}</a></li></ul></div><div class="selector etapa"><!-- Left aligned menu below button --> <button id=setStage class="mdl-button mdl-js-button mdl-button--primary">{{ main.actualStage }} <i class=material-icons>arrow_drop_down</i></button><ul class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for=setStage><li class=mdl-menu__item ng-repeat="stage in main.race" ng-click="main.setStage(stage.request_id, stage.name)"><a>{{ stage.stage }} - {{ stage.name }}</a></li></ul></div><div class="selector download" ng-hide=!main.resolveStage><button id=download class="mdl-button mdl-js-button mdl-button--primary pull-right">Descargar excel <i class=material-icons>file_download</i></button><ul class="mdl-menu mdl-js-menu mdl-menu--bottom-right" for=download><li class=mdl-menu__item><a>Etapa</a></li><li class=mdl-menu__item><a>General</a></li><li class=mdl-menu__item><a>Montaña</a></li><li class=mdl-menu__item><a>Puntos</a></li><li class=mdl-menu__item><a>Equipos</a></li><li class=mdl-menu__item><a>Juvenil</a></li></ul></div></section><section class="section--center mdl-grid mdl-grid--no-spacing mdl-shadow--2dp"><div class="mdl-card mdl-cell mdl-cell--12-col table-times"><div class="mdl-card__supporting-text spinnerbox" ng-hide=!main.spinner><div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div></div><table class="mdl-data-table mdl-js-data-table" ng-hide=!main.resolveStage><thead><tr><th class=mdl-data-table__cell--non-numeric>Puesto</th><th class=mdl-data-table__cell--non-numeric>Nombre</th><th class=mdl-data-table__cell--non-numeric>Equipo</th><th>Tiempo</th></tr></thead><tbody><tr ng-repeat="racer in main.ranking.GC"><td class=mdl-data-table__cell--non-numeric>{{ racer.position }}</td><td class=mdl-data-table__cell--non-numeric>{{ racer.name }}</td><td class=mdl-data-table__cell--non-numeric>{{ racer.team }}</td><td>{{ racer.time }}</td></tr></tbody></table></div></section></div></main>')}]);
//# sourceMappingURL=../maps/scripts/app-196baac3e5.js.map
