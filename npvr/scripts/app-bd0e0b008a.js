/******/!function(e){function n(i){if(t[i])return t[i].exports;var a=t[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}// webpackBootstrap
/******/
var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";var i=t(1),a=t(2),o=t(3),r=t(4),s=t(5),c=t(6),l=t(7),u=t(8),d=t(9),h=t(10),p=t(11);t(12);angular.module("npvr",["ngAnimate","ngSanitize","ngMessages","ui.router","toastr"]).constant("appConfig",c.appConfig).config(i.config).config(a.routerConfig).run(o.runBlock).factory("theMovieDB",l.theMovieDB).factory("channelService",u.channelService).directive("windowHeight",d.windowHeight).directive("bodyBackground",h.bodyBackground).directive("daysWeek",p.daysWeek).controller("MainController",r.MainController).controller("ChannelController",s.ChannelController)},function(e,n){"use strict";function t(e,n){"ngInject";e.debugEnabled(!0),n.allowHtml=!0,n.timeOut=3e3,n.positionClass="toast-top-right",n.preventDuplicates=!0,n.progressBar=!0}t.$inject=["$logProvider","toastrConfig"],Object.defineProperty(n,"__esModule",{value:!0}),n.config=t},function(e,n){"use strict";function t(e,n){"ngInject";e.state("home",{url:"","abstract":!0,templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.channel",{url:"/channel/:network",views:{contentView:{templateUrl:"app/channel/channel.html",controller:"ChannelController",controllerAs:"channel"}}}).state("home.channel.detail",{url:"/detail/:id",views:{"detail@home.channel":{template:"<h1>expand show of detail</h1>",controller:function(){console.log("show detail")},controllerAs:"detail"}}}).state("home.record",{url:"/record",views:{contentView:{template:"<h1>RECORD<h1>"}}}).state("home.vod",{url:"/vod",views:{contentView:{template:"<h1>VOD<h1>"}}}).state("home.custom",{url:"/custom",views:{contentView:{template:"<h1>PARA TI<h1>"}}}).state("home.search",{url:"/search",views:{contentView:{template:"<h1>Buscar<h1>"}}}),n.otherwise("/channel/64")}t.$inject=["$stateProvider","$urlRouterProvider"],Object.defineProperty(n,"__esModule",{value:!0}),n.routerConfig=t},function(e,n){"use strict";function t(e,n,t){"ngInject";n._=t._,e.debug("runBlock end",n._)}t.$inject=["$log","$rootScope","$window"],Object.defineProperty(n,"__esModule",{value:!0}),n.runBlock=t},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function a(e,n,i,o,r,s){"ngInject";function c(){return u().then(function(){e.debug("LOAD => list of shows in base channel:id")}).then(function(){return l().then(function(){e.debug("LOAD => the movie DB init config"),e.debug(v.apiParams)})}).then(function(){return d().then(function(){e.debug("LOAD => get the active live program info")})})}function l(){return r.getConfig(0).then(function(e){v.apiParams=e})}function u(){return r.getSeries(0).then(function(e){for(var n=1,t=[],i=e.results.length,a={now:new Date,date_stamp:h(new Date),day:864e5,lapsus:[54e5,36e5,18e5]};a.day>0;){var o=_.random(0,i-1),r=_.random(0,2),c={id:n,imdb_id:e.results[o].id,catchup:r>0?!0:!1,time_line:p(a.now,a.date_stamp,a.lapsus[r]),name:e.results[o].name,path:e.results[o].poster_path,overview:e.results[o].overview};c.time_line.is_live===!0&&(g=c.imdb_id),t.push(c),n++,a.day-=a.lapsus[r],a.date_stamp+=a.lapsus[r]}s.setShows(t)},function(n){e.debug(n)})}function d(){return r.getShow(g,0).then(function(e){v.show=e})}function h(e){var n=new Date(e-432e5);return n.getMinutes()>0&&n.getMinutes()<16?n.setMinutes(0):n.getMinutes()>15&&n.getMinutes()<46?n.setMinutes(30):(n.setMinutes(0),n.setHours(n.getHours()+1)),Date.parse(n)}function p(e,n,t){var i=Date.parse(e),a={hour_start:n,hour_end:n+t};return a.is_live=a.hour_start<i&&a.hour_end>i?!0:!1,a}t(this,a);var g=void 0,v=this,f=o();v.show={},v.apiParams={},v.menus=f.menus,r.setParams({api_key:f.key,language:"es",with_networks:n.params.network}),c(),e.debug("Main Controller loadded")};i.$inject=["$log","$state","$scope","appConfig","theMovieDB","channelService"],n.MainController=i},function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function a(e,n,i,o,r,s){"ngInject";function c(){return l().then(function(){e.debug("load shows")})}function l(){return r.getShows(_.random(1e3,2e3)).then(function(n){angular.forEach(n,function(e){e.expand=e.time_line.is_live?!0:!1}),d.shows=n,e.debug("shows from channelService get",d.shows)})["finally"](function(){d.loading=!1})}function u(e){angular.forEach(d.shows,function(n){n.expand=n.id===e?!0:!1})}t(this,a);var d=this;s();d.shows=[],d.loading=!0,d.currentDay=new Date,d.currentDay=d.currentDay.getUTCDate(),d.expandShow=u,c(),e.debug("Channel Controller loadded")};i.$inject=["$log","$state","$scope","theMovieDB","channelService","appConfig"],n.ChannelController=i},function(e,n){"use strict";function t(){"ngInject";var e={channel:"discovery",key:"25a2fd3a417ec4ca1d05c83fdb354704",menus:[{channel:"Discovery Channel",route:"channel"},{channel:"Mis grabaciones",route:"record"},{channel:"Vod",route:"vod"},{channel:"Para ti",route:"custom"}]};return e}Object.defineProperty(n,"__esModule",{value:!0}),n.appConfig=t},function(e,n){"use strict";function t(e,n,t,i){"ngInject";function a(e){return l(e,p.series)}function o(e,n){return l(n,p.show+e)}function r(e){return l(e,p.config)}function s(e){return d=e}function c(e){return u=h+e}function l(a,o){c(o);var r=n.defer();return e({url:u,method:"GET",params:d}).success(function(e){t.debug("Respond from service",e),i(function(){r.resolve(e)},a)}).error(function(){r.reject("fail")}),r.promise}var u=void 0,d=void 0,h="https://api.themoviedb.org/3",p={series:"/discover/tv",show:"/tv/",config:"/configuration"},g={setParams:s,getSeries:a,getShow:o,getConfig:r};return g}t.$inject=["$http","$q","$log","$timeout"],Object.defineProperty(n,"__esModule",{value:!0}),n.theMovieDB=t},function(e,n){"use strict";function t(e,n,t){"ngInject";function i(e){var i=n.defer();return t(function(){i.resolve(o)},e),i.promise}function a(e){return o=e}var o=[],r={setShows:a,getShows:i};return r}t.$inject=["$log","$q","$timeout"],Object.defineProperty(n,"__esModule",{value:!0}),n.channelService=t},function(e,n){"use strict";function t(e){"ngInject";return function(n,t){function i(){var n=e.innerHeight;t.css("height",n+"px")}var a=angular.element(e);i(),a.on("resize",_.debounce(i,250)),a.on("$destroy",i())}}t.$inject=["$window"],Object.defineProperty(n,"__esModule",{value:!0}),n.windowHeight=t},function(e,n){"use strict";function t(e){"ngInject";return function(e,n,t){e.$watch(t.path,function(e){n.addClass("animated fadeIn"),n.css({"background-image":"url("+e+")"})})}}t.$inject=["$log"],Object.defineProperty(n,"__esModule",{value:!0}),n.bodyBackground=t},function(e,n){"use strict";function t(e,n){"ngInject";return{restrict:"EA",scope:{current:"=",date:"="},template:"{{ text | uppercase}}",link:function(e){var t=n("date")(e.date,"d");e.current>t?e.text="ayer":e.current==t?e.text="hoy":e.text="mañana"}}}t.$inject=["$log","$filter"],Object.defineProperty(n,"__esModule",{value:!0}),n.daysWeek=t},function(e,n){"use strict";function t(e){"ngInject";return{enter:function(e,n){jQuery(e).fadeIn(1e3,n)},move:function(e,n){jQuery(e).fadeIn(1e3,n)},leave:function(e,n){jQuery(e).fadeOut(1e3,n)}}}t.$inject=["$animateCss"],Object.defineProperty(n,"__esModule",{value:!0}),n.slider=t}]),angular.module("npvr").run(["$templateCache",function(e){e.put("app/channel/channel.html",'<div ng-hide="!channel.loading" class="spinner-box" ng-class=""><svg class="spinner" width="65px" height="65px" viewbox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg><h3>CARGANDO</h3></div><div id="carrousel" class=""><div class="overflow-div"><div class="slider" ng-repeat="show in channel.shows track by show.id"><div class="program" ng-class="show.expand ? \'detail\' : \'compact\'"><div class="time"><h4 ng-if="show.time_line.is_live">AHORA</h4><h4 ng-if="!show.time_line.is_live" days-week="" current="channel.currentDay" date="show.time_line.hour_start"></h4><h3>{{ show.time_line.hour_start | date : \'h:mm\'}} A {{ show.time_line.hour_end | date : \'h:mm\'}} hrs</h3></div><div class="tumb"><img class="poster" ng-click="channel.expandShow(show.id)" ng-class="{ \'active\' : {{ show.expand }} }" ng-src="{{ main.apiParams.images.base_url }}{{ main.apiParams.images.poster_sizes[2] }}{{show.path}}"></div><div class="content" ng-if="show.expand"><div class="episode"><h2>{{ show.name }}</h2><h4>Temp 01 Eps 01</h4></div><ul class="navigation inner-menu"><li ng-if="!show.catchup" ng-class="{ \'active\': {{ !show.catchup }} }"><a>{{ \'Reiniciar Programa\' | uppercase }}</a></li><li ng-class="{ \'active\': {{ show.catchup }} }"><a>{{ \'Ver Más Episodios\' | uppercase }}</a></li><li><a>{{ \'Grabar\' | uppercase }}</a></li><li><a>{{ \'Más Info\' | uppercase }}</a></li></ul></div></div></div></div></div><div class="arrows"><p class="pull-left"><span class="glyphicon glyphicon-chevron-left"></span> Más Programas</p><p class="pull-right">Más Programas <span class="glyphicon glyphicon-chevron-right"></span></p></div><div ui-view="detail"></div>'),e.put("app/main/main.html",'<div id="page-content" window-height=""><section class="header"><div class="container"><div class="row"><div class="col-lg-12"><h2>Ahora: {{ main.show.name }} <span class="glyphicon glyphicon-repeat"></span></h2><img class="logo pull-right" ng-src="assets/channels/{{ main.appConfig.channel }}.png"></div></div></div></section><section class="content-view"><div class="container"><div class="row"><div class="col-lg-12"><ul class="navigation top-level list-inline"><li ui-sref-active="active" class="search"><a ui-sref="home.search"><span class="glyphicon glyphicon-search"></span></a></li><li ng-repeat="menu in main.menus" ui-sref-active="active"><a ui-sref="home.{{ menu.route }}">{{ menu.channel | uppercase }}</a></li></ul><img class="tip navigation pull-right" src="../../assets/images/navigation.png"></div></div><div class="row"><div class="col-lg-12"><div ui-view="contentView" class="contentView"></div></div></div></div><div class="background-gradient"></div></section></div><div id="background-image" window-height="" body-background="" path="main.apiParams.images.base_url + main.apiParams.images.backdrop_sizes[2] + main.show.backdrop_path"></div>')}]);
//# sourceMappingURL=../maps/scripts/app-bd0e0b008a.js.map
