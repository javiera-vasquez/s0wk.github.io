/******/!function(e){function n(a){if(i[a])return i[a].exports;var o=i[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}// webpackBootstrap
/******/
var i={};return n.m=e,n.c=i,n.p="",n(0)}([function(e,n,i){"use strict";var a=i(1),o=i(2),t=i(3),s=i(4),r=i(5),l=i(6),c=i(7),d=i(8),u=i(9),p=i(10),h=i(11),m=i(12),g=i(13),f=i(14),v=i(15);i(16);angular.module("npvr",["ngAnimate","ngSanitize","ngMessages","ui.router","toastr","ui.bootstrap"]).constant("appService",d.appService).config(a.config).config(o.routerConfig).run(t.runBlock).factory("tmdbService",p.tmdbService).factory("channelService",h.channelService).factory("recordingListService",m.recordingListService).factory("userService",u.userService).directive("windowHeight",g.windowHeight).directive("bodyBackground",f.bodyBackground).directive("daysWeek",v.daysWeek).controller("MainController",s.MainController).controller("ChannelController",r.ChannelController).controller("showDetailController",l.showDetailController).controller("showRecordController",c.showRecordController)},function(e,n){"use strict";function i(e,n){"ngInject";e.debugEnabled(!0),n.allowHtml=!0,n.timeOut=3e3,n.positionClass="toast-top-right",n.preventDuplicates=!0,n.progressBar=!0}i.$inject=["$logProvider","toastrConfig"],Object.defineProperty(n,"__esModule",{value:!0}),n.config=i},function(e,n){"use strict";function i(e,n){"ngInject";e.state("home",{url:"","abstract":!0,templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("home.channel",{url:"/channel/:network",views:{contentView:{templateUrl:"app/channel/channel.html",controller:"ChannelController",controllerAs:"channel"}}}).state("home.record",{url:"/record",views:{contentView:{template:"<h1>RECORD<h1>"}}}).state("home.vod",{url:"/vod",views:{contentView:{template:"<h1>VOD<h1>"}}}).state("home.custom",{url:"/custom",views:{contentView:{template:"<h1>PARA TI<h1>"}}}).state("player",{url:"/player",template:"<h1>video en auto play</h1>",controller:function(){console.log("mira este video!")}}).state("vod",{url:"/old-vod/:type",template:"<h1>estamos en vod</h1>",controller:function(){console.log("mira que feo")}}),n.otherwise("/channel/64")}i.$inject=["$stateProvider","$urlRouterProvider"],Object.defineProperty(n,"__esModule",{value:!0}),n.routerConfig=i},function(e,n){"use strict";function i(e,n,i){"ngInject";n._=i._,n.$on("$stateChangeError",console.log.bind(console)),e.debug("runBlock end")}i.$inject=["$log","$rootScope","$window"],Object.defineProperty(n,"__esModule",{value:!0}),n.runBlock=i},function(e,n){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function o(e,n,a,t,s,r){"ngInject";function l(){return d().then(function(){e.debug("LOAD => list of shows in base channel:id")}).then(function(){return c().then(function(){e.debug("LOAD => the movie DB init config"),e.debug(g.apiParams)})}).then(function(){return u().then(function(){e.debug("LOAD => get the active live program info")})})}function c(){return s.getConfig(0).then(function(e){g.apiParams=e})}function d(){return s.getSeries(0).then(function(e){for(var n=1,i=[],a=e.results.length,o={now:new Date,date_stamp:p(new Date),day:864e5,lapsus:[54e5,36e5,18e5]};o.day>0;){var t=_.random(0,a-1),s=_.random(0,2),l={id:n,imdb_id:e.results[t].id,catchup:s>0?!0:!1,episode:_.random(1,13),season:_.random(1,3),time_line:h(o.now,o.date_stamp,o.lapsus[s]),name:e.results[t].name,path:e.results[t].poster_path,overview:e.results[t].overview};l.time_line.is_live===!0&&(m=l.imdb_id),i.push(l),n++,o.day-=o.lapsus[s],o.date_stamp+=o.lapsus[s]}r.setShows(i)},function(n){e.debug(n)})}function u(){return s.getShow(m,0).then(function(e){g.show=e})}function p(e){var n=new Date(e-432e5);return n.getMinutes()>0&&n.getMinutes()<16?n.setMinutes(0):n.getMinutes()>15&&n.getMinutes()<46?n.setMinutes(30):(n.setMinutes(0),n.setHours(n.getHours()+1)),Date.parse(n)}function h(e,n,i){var a=Date.parse(e),o={hour_start:n,hour_end:n+i};return o.is_live=o.hour_start<a&&o.hour_end>a?!0:!1,o}i(this,o);var m=void 0,g=this,f=t();g.show={},g.apiParams={},g.channel=f.channels,g.menus=f.menus,s.setParams({api_key:f.tmdb_api_key,language:"es",with_networks:n.params.network}),l(),e.debug("Main Controller loadded")};a.$inject=["$log","$state","$rootScope","appService","tmdbService","channelService"],n.MainController=a},function(e,n){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function o(e,n,a,t,s){"ngInject";function r(){return l().then(function(){})}function l(){return s.getShows(_.random(1e3,2e3)).then(function(n){angular.forEach(n,function(e,n){e.expand=!1,e.time_line.is_live&&(h=n,e.expand=!0)}),p.shows=n,e.debug("shows from channelService get",p.shows),e.debug("number of items",p.shows.length)})["finally"](function(){p.loading=!1})}function c(e){e!==h&&(p.shows[e].expand=!0,p.shows[h].expand=!1,h=e)}function d(e){return _.inRange(e,h-2,h+3)}function u(n,i){var o="info"==n?"app/modals/show-detail/show.detail.html":"app/modals/show-recording/show.recording.html",s="info"==n?"showDetailController":"showRecordController",r=t.open({animation:!0,templateUrl:o,controller:s,controllerAs:"modal",size:"lg",resolve:{show:function(){return i},params:function(){return a.$parent.main.apiParams}}});r.result.then(function(){e.info("modal open")},function(){e.info("Modal dismissed at: "+new Date)})}i(this,o);var p=this,h=void 0;p.shows=[],p.loading=!0,p.currentDay=new Date,p.currentDay=p.currentDay.getUTCDate(),p.expandShow=c,p.showsInRange=d,p.openModal=u,r(),e.debug("Channel Controller loadded")};a.$inject=["$log","$state","$scope","$uibModal","channelService"],n.ChannelController=a},function(e,n){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function o(e,n,a,t,s){"ngInject";function r(){return l(n.imdb_id,1e3).then(function(){e.debug("show detail loaded")})}function l(n,i){return t.getShow(n,i).then(function(e){c.show=e},function(n){e.debug(n)})["finally"](function(){c.loading=!1})}i(this,o);var c=this,d=s();c.show={},c.apiParams=a,c.loading=!0,c.title="Información de la serie",t.setParams({api_key:d.tmdb_api_key,language:"es"}),r(),e.debug(n.imdb_id,t)};a.$inject=["$log","show","params","tmdbService","appService"],n.showDetailController=a},function(e,n){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function o(e,n,a,t,s){"ngInject";function r(){n(function(){return p.loading=!1},h).then(function(){e.debug("calc space and stage")})}function l(e){var n=g.indexOf(e);u(p.user,m[n])||-1===n?p.outOfSpace=!0:d(p.stage,f[0])}function c(){d(p.stage,v[0])}function d(n,i){return e.debug("old",n,"new",i),n!==i?p.stage=i:void 0}function u(n,i){return e.debug(i,n.consumeSpace,n.totalSpace),i+n.consumeSpace>n.totalSpace?!0:!1}i(this,o);var p=this,h=0,m=[1,3,5,10],g=["episode","new","last","all"],f=["confirm-recording","success-recording"],v=["purchase-space","validate-password","success-purchase"];e.debug("asdfasdf",s),p.show=a,p.apiParams=t,p.user=s,p.title="Grabar",p.loading=!0,p.outOfSpace=!1,p.stage=void 0,p.setRecord=l,p.buySpace=c,p.recodingCost=0,r();e.debug("record controller loaded",p.user)};a.$inject=["$log","$timeout","show","params","userService"],n.showRecordController=a},function(e,n){"use strict";function i(){"ngInject";return{tmdb_api_key:"25a2fd3a417ec4ca1d05c83fdb354704",channels:["Fox+","Discovery Channel","AMC","HBO"],menus:[{channel:"Mis grabaciones",route:"record"},{channel:"Vod",route:"vod"},{channel:"Para ti",route:"custom"}]}}Object.defineProperty(n,"__esModule",{value:!0}),n.appService=i},function(e,n){"use strict";function i(e,n){"ngInject";function i(e){this.totalSpace=e}var a={totalSpace:10,consumeSpace:_.random(0,7),purchaseSpace:i};return a}i.$inject=["$log","$q"],Object.defineProperty(n,"__esModule",{value:!0}),n.userService=i},function(e,n){"use strict";function i(e,n,i,a){"ngInject";function o(e){return c(e,h.series)}function t(e,n){return c(n,h.show+e)}function s(e){return c(e,h.config)}function r(e){return u=e}function l(e){return d=p+e}function c(o,t){l(t);var s=n.defer();return e({url:d,method:"GET",params:u}).success(function(e){i.debug("Respond from service",e),a(function(){s.resolve(e)},o)}).error(function(){s.reject("fail")}),s.promise}var d=void 0,u=void 0,p="https://api.themoviedb.org/3",h={series:"/discover/tv",show:"/tv/",config:"/configuration"},m={setParams:r,getSeries:o,getShow:t,getConfig:s};return m}i.$inject=["$http","$q","$log","$timeout"],Object.defineProperty(n,"__esModule",{value:!0}),n.tmdbService=i},function(e,n){"use strict";function i(e,n,i){"ngInject";function a(e){var a=n.defer();return i(function(){a.resolve(t)},e),a.promise}function o(e){return t=e}var t=[],s={setShows:o,getShows:a};return s}i.$inject=["$log","$q","$timeout"],Object.defineProperty(n,"__esModule",{value:!0}),n.channelService=i},function(e,n){"use strict";function i(e,n,i,a){"ngInject";function o(){}function t(){}var s={getRecords:o,setRecord:t};return s}i.$inject=["$log","$q","$http","userService"],Object.defineProperty(n,"__esModule",{value:!0}),n.recordingListService=i},function(e,n){"use strict";function i(e){"ngInject";return function(n,i){function a(){var n=e.innerHeight;i.css("height",n+"px")}var o=angular.element(e);a(),o.on("resize",_.debounce(a,250)),o.on("$destroy",a())}}i.$inject=["$window"],Object.defineProperty(n,"__esModule",{value:!0}),n.windowHeight=i},function(e,n){"use strict";function i(e){"ngInject";return function(e,n,i){e.$watch(i.path,function(e){n.addClass("animated fadeIn"),n.css({"background-image":"url("+e+")"})})}}i.$inject=["$log"],Object.defineProperty(n,"__esModule",{value:!0}),n.bodyBackground=i},function(e,n){"use strict";function i(e,n){"ngInject";return{restrict:"EA",scope:{current:"=",date:"="},template:"{{ text | uppercase}}",link:function(e){var i=n("date")(e.date,"d");e.current>i?e.text="ayer":e.current==i?e.text="hoy":e.text="mañana"}}}i.$inject=["$log","$filter"],Object.defineProperty(n,"__esModule",{value:!0}),n.daysWeek=i},function(e,n){"use strict";function i(e){"ngInject";return{enter:function(n,i){e.debug("enter");var a="slideInLeft",o="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";n.addClass("animated "+a).one(o,function(){n.removeClass("animated "+a),i()})},move:function(n,i){e.debug("move");var a="bounceIn",o="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";n.addClass("animated "+a).one(o,function(){n.removeClass("animated "+a),i()})},leave:function(n,i){e.debug("leave");var a="slideOutRight",o="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";n.addClass("animated "+a).one(o,function(){n.removeClass("animated "+a),i()})}}}i.$inject=["$log"],Object.defineProperty(n,"__esModule",{value:!0}),n.slideAnimation=i}]),angular.module("npvr").run(["$templateCache",function(e){e.put("app/channel/channel.html",'<div class="pagination hide"><p class="pull-left" ng-click="nextShow"><span class="glyphicon glyphicon-chevron-left"></span></p><p class="pull-right" ng-click="previusShow"><span class="glyphicon glyphicon-chevron-right"></span></p></div><div ng-include="\'../app/components/spinner.template.html\'" ng-hide="!channel.loading" class="spinner-box"></div><div id="carrousel"><div class="overflow-div"><div class="slider-animation" ng-repeat="show in channel.shows track by show.id" ng-if="channel.showsInRange($index)"><div class="program" ng-class="show.expand ? \'detail\' : \'compact\'"><div class="time"><h4 ng-if="show.time_line.is_live">AHORA</h4><h4 ng-if="!show.time_line.is_live" days-week="" current="channel.currentDay" date="show.time_line.hour_start"></h4><h3>{{ show.time_line.hour_start | date : \'h:mm\'}} A {{ show.time_line.hour_end | date : \'h:mm\'}} hrs</h3></div><div class="tumb animated fadeIn"><img class="poster" ng-click="channel.expandShow($index)" ng-src="{{ main.apiParams.images.base_url }}{{ main.apiParams.images.poster_sizes[2] }}{{show.path}}"></div><div class="content" ng-if="show.expand"><div class="episode"><h2>{{ show.name }}</h2><h4>Temporada {{ show.season }} Episodio {{ show.episode }}</h4></div><ul class="navigation inner-menu"><li ui-sref="player" ng-if="show.time_line.is_live" ng-class="{ \'active\': {{ show.time_line.is_live }} }"><a>{{ \'Reiniciar Programa\' | uppercase }}</a></li><li ui-sref="vod({type:list})" ng-class="{ \'active\': {{ !show.time_line.is_live }} }"><a>{{ \'Ver Más Episodios\' | uppercase }}</a></li><li ng-click="channel.openModal(\'rec\', show)"><a>{{ \'Grabar\' | uppercase }}</a></li><li ng-click="channel.openModal(\'info\', show)"><a>{{ \'Más Info\' | uppercase }}</a></li></ul></div></div></div></div></div><div class="arrows"><p class="pull-left"><span class="glyphicon glyphicon-chevron-left"></span> Más Programas</p><p class="pull-right">Más Programas <span class="glyphicon glyphicon-chevron-right"></span></p></div>'),e.put("app/components/spinner.template.html",'<svg class="spinner" width="65px" height="65px" viewbox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg><h3>CARGANDO</h3>'),e.put("app/main/main.html",'<div id="page-content" window-height=""><div ui-view="vodFake" class="vodFake"></div><section class="header"><div class="container"><div class="row"><div class="col-lg-12"><h2>Ahora: {{ main.show.name }} <span class="glyphicon glyphicon-repeat"></span></h2><img class="logo pull-right" ng-src="assets/channels/{{ main.appConfig.channel }}.png"></div></div></div></section><section class="content-view"><div class="container"><div class="row"><div class="col-lg-12"><ul class="navigation top-level list-inline"><li ui-sref-active="active" class="search"><a ui-sref="home.search"><span class="glyphicon glyphicon-search"></span></a></li><li ui-sref-active="active"><a ui-sref="home.channel">{{ main.channel[0] | uppercase }}</a></li><li ng-repeat="menu in main.menus" ui-sref-active="active"><a ui-sref="home.{{ menu.route }}">{{ menu.channel | uppercase }}</a></li></ul><img class="tip navigation pull-right" src="../../assets/images/navigation.png"></div></div><div class="row"><div class="col-lg-12"><div ui-view="contentView" class="contentView"></div></div></div></div><div class="background-gradient"></div></section></div><div id="background-image" window-height="" body-background="" path="main.apiParams.images.base_url + main.apiParams.images.backdrop_sizes[2] + main.show.backdrop_path"></div>'),e.put("app/modals/show-detail/show.detail.html",'<div id="show-detail" class="modal-body"><div class="modal-header clearfix"><h3 class="pull-left">{{ modal.title | uppercase }}</h3><img class="tip pull-right" src="../../assets/images/back.png"></div><div class="modal-container"><div ng-if="modal.loading" ng-include="\'../app/components/spinner.template.html\'" class="spinner-box"></div><div ng-if="!modal.loading" class="flex"><div class="flex-left flex-width-33"><img class="poster" ng-src="{{ modal.apiParams.images.base_url }}{{ modal.apiParams.images.poster_sizes[2] }}{{ modal.show.poster_path }}"></div><div class="left-left flex-width-66"><h4>{{ modal.show.name }} <span class="label ratings">PG</span></h4><ul class="list-unstyled"><li><em>Género:</em>{{ modal.show.genres[0].name }}</li><li><em>Duración:</em>{{ modal.show.episode_run_time[0] }}</li><li><em>Idioma:</em>{{ modal.show.languages[0] }}</li><li><em>Año:</em>{{ modal.show.first_air_date | date : \'yyyy\'}}</li><li><em>Temporadas:</em>{{ modal.show.number_of_seasons }}</li><li><em>Episodios:</em>{{ modal.show.number_of_episodes }}</li></ul><p class="overview">{{ modal.show.overview | limitTo : 350 }}</p></div></div></div></div>'),e.put("app/modals/show-recording/confirm.recording.html",'<h4>Tu grabación ha sido programada con éxito. Puedes encontrarla en MIS GRABACIONES una vez que se haya grabado.</h4><ul><li><h2><a ng-click="modal.confirmRecord()">confirmar</a></h2></li><li><h2><a ng-click="modal.cancelRecord()">anular</a></h2></li></ul>'),e.put("app/modals/show-recording/default.html",'<div class="flex-width-40"><ul class="navigation inner-menu"><li ng-click="modal.setRecord(\'episode\')"><a>EPISODIO</a></li><li ng-click="modal.setRecord(\'new\')"><a>EPISODIOS ESTRENO</a></li><li ng-click="modal.setRecord(\'last\')"><a>ÚLTIMOS 5 EPS</a></li><li ng-click="modal.setRecord(\'all\')"><a>TODA LA SERIE</a></li></ul></div><div class="flex-width-60 clearfix modal-recording-info"><div class="thumb pull-left"><img class="poster img-responsive" ng-src="{{ modal.apiParams.images.base_url }}{{ modal.apiParams.images.poster_sizes[2] }}{{ modal.show.path }}"></div><div class="content pull-left"><h4 class="title">{{ modal.show.name }} <span class="label ratings">PG</span></h4><p class="overview" ng-if="!modal.outOfSpace">{{ modal.show.overview | limitTo : 100 }}</p><h4 class="out-of-space blue" ng-if="modal.outOfSpace" ng-click="modal.buySpace()">¿Necesitas más espacio? Presiona <strong>OK</strong> para comprar</h4><h5 class="time"><strong>{{ modal.recodingCost }}</strong> {{ (modal.recodingCost > 1) ? \'hrs\' : \'hr\' }} en la nube</h5></div></div><div class="flex-width-100 progress-bar-container"><div class="clearfix"><span class="glyphicon glyphicon-cloud-upload pull-left"></span><uib-progressbar class="pull-left" value="modal.user.consumeSpace" max="modal.user.totalSpace" type="info"><span ng-if="modal.user.consumeSpace > 0">Uso {{ modal.user.consumeSpace }} {{ (modal.user.consumeSpace > 1) ? \'hrs\' : \'hr\' }}</span></uib-progressbar><h4 ng-if="modal.outOfSpace" class="out-of-space red pull-right">NO TIENES ESPACIO SUFICIENTE</h4></div></div>'),e.put("app/modals/show-recording/purchase.space.html","asdfsadf"),e.put("app/modals/show-recording/show.recording.html",'<div id="show-detail" class="modal-body"><section class="modal-header clearfix"><h3 class="pull-left">{{ modal.title | uppercase }}</h3><img class="tip pull-right" src="../../assets/images/navigation.png"> <img class="tip pull-right" src="../../assets/images/back.png"></section><section class="modal-container"><div ng-if="modal.loading" ng-include="\'../app/components/spinner.template.html\'" class="spinner-box"></div><div ng-if="!modal.loading"><ng-switch on="modal.stage"><ng-switch ng-switch-when="confirm-recording"><ng-include class="flex" src="\'../app/modals/show-recording/confirm.recording.html\'"></ng-include></ng-switch><div ng-switch-when="purchase-space"><ng-include class="flex" src="\'../app/modals/show-recording/purchase.space.html\'"></ng-include></div><div ng-switch-default=""><ng-include class="flex" src="\'../app/modals/show-recording/default.html\'"></ng-include></div></ng-switch></div></section></div>'),e.put("app/modals/show-recording/success.purchase.html",""),e.put("app/modals/show-recording/success.recording.html",""),e.put("app/modals/show-recording/validate.password.html","")}]);
//# sourceMappingURL=../maps/scripts/app-4c6933364f.js.map
